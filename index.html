<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∞—Ö–º–∞—Ç–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –¥—Ä—É–∑–µ–π</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>üèÜ –®–∞—Ö–º–∞—Ç–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä –¥—Ä—É–∑–µ–π</h1>
        <p>–†–µ–π—Ç–∏–Ω–≥ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å Lichess.org</p>

        <!-- –í–∫–ª–∞–¥–∫–∏ -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="rating" onclick="switchTab('rating')">üìä –†–µ–π—Ç–∏–Ω–≥</button>
            <button class="tab-btn" data-tab="history" onclick="switchTab('history')">‚öîÔ∏è –ò—Å—Ç–æ—Ä–∏—è –ø–∞—Ä—Ç–∏–π –º–µ–∂–¥—É –Ω–∞–º–∏</button>
            <button class="tab-btn" data-tab="chat" onclick="switchTab('chat')">üí¨ –û–±—â–∏–π —á–∞—Ç</button>
        </div>

        <!-- ‚îÄ‚îÄ –í–ö–õ–ê–î–ö–ê: –†–ï–ô–¢–ò–ù–ì ‚îÄ‚îÄ -->
        <div id="tab-rating" class="tab-content active">
            <div class="controls">
                <button onclick="location.reload()" class="refresh-btn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>

            <table class="leaderboard">
                <thead>
                    <tr>
                        <th>–ú–µ—Å—Ç–æ</th>
                        <th>–ò–≥—Ä–æ–∫</th>
                        <th class="sortable" onclick="sortTable('rapid')">–†–∞–ø–∏–¥ ‚¨ç</th>
                        <th class="sortable" onclick="sortTable('blitz')">–ë–ª–∏—Ü ‚¨ç</th>
                        <th class="sortable" onclick="sortTable('bullet')">–ü—É–ª—è ‚¨ç</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    <tr><td colspan="5" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</td></tr>
                </tbody>
            </table>

            <div class="add-player">
                <h3>–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</h3>
                <input type="text" id="new-username" placeholder="–ù–∏–∫–Ω–µ–π–º –Ω–∞ Lichess">
                <button onclick="addPlayer()">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ –í–ö–õ–ê–î–ö–ê: –ò–°–¢–û–†–ò–Ø –ü–ê–†–¢–ò–ô ‚îÄ‚îÄ -->
        <div id="tab-history" class="tab-content">
            <div class="controls">
                <button onclick="loadGamesHistory()" class="refresh-btn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
            </div>
            <div id="games-list">
                <p class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ –í–ö–õ–ê–î–ö–ê: –ß–ê–¢ ‚îÄ‚îÄ -->
        <div id="tab-chat" class="tab-content">
            <div class="chat-header">
                <span id="chat-user-label"></span>
                <button onclick="changeNickname()" class="change-nick-btn">‚úèÔ∏è –°–º–µ–Ω–∏—Ç—å –Ω–∏–∫</button>
            </div>
            <div id="chat-messages" class="chat-messages">
                <div class="chat-placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π...</div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." maxlength="500"
                       onkeydown="if(event.key==='Enter') sendMessage()">
                <button onclick="sendMessage()" class="chat-send-btn">‚û§</button>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ –ú–û–î–ê–õ: –í–´–ë–û–† –ù–ò–ö–ù–ï–ô–ú–ê ‚îÄ‚îÄ -->
    <div id="nickname-modal" class="modal-overlay hidden">
        <div class="modal-box">
            <div class="modal-icon">‚ôüÔ∏è</div>
            <h2>–ö—Ç–æ —Ç—ã?</h2>
            <p class="modal-subtitle">–í—ã–±–µ—Ä–∏ —Å–≤–æ–π –Ω–∏–∫–Ω–µ–π–º, —á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å –≤ —á–∞—Ç</p>
            <div id="modal-friends-list" class="modal-friends"></div>
            <div class="modal-or"><span>–∏–ª–∏ –≤–≤–µ–¥–∏ –ª—é–±–æ–π</span></div>
            <div class="modal-input-row">
                <input type="text" id="nickname-input" placeholder="–ù–∏–∫–Ω–µ–π–º..." maxlength="30"
                       onkeydown="if(event.key==='Enter') saveNickname()">
                <button onclick="saveNickname()" class="modal-enter-btn">–í–æ–π—Ç–∏ ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK (Realtime Database) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>