<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Chess Friends | Leaderboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">
        <!-- HEADER -->
        <header class="app-header">
            <h1 class="app-logo">CHESS<span class="highlight">FRIENDS</span></h1>
            
            <nav class="main-nav">
                <button class="tab-btn active" onclick="switchTab('leaderboard')" data-tab="leaderboard">
                     РЕЙТИНГ
                </button>
                <button class="tab-btn" onclick="switchTab('history')" data-tab="history">
                     ИСТОРИЯ ПАРТИЙ
                </button>
                <button class="tab-btn" onclick="switchTab('activity')" data-tab="activity">
                     АКТИВНОСТЬ
                </button>
                <button class="tab-btn" onclick="switchTab('profile')" data-tab="profile">
                     ПРОФИЛЬ
                </button>
                <button class="tab-btn" onclick="switchTab('shop')" data-tab="shop">
                     МАГАЗИН
                </button>
                <button class="tab-btn" onclick="switchTab('chat')" data-tab="chat">
                     ЧАТ
                </button>
            </nav>
        </header>

        <!-- CONTENT -->
        <main>
            <!-- 1. LEADERBOARD -->
            <section id="tab-leaderboard" class="tab-content active">
                
                <div class="rating-mode-switch">
                    <label class="switch-label">
                        <input type="radio" name="rating-mode" value="lichess" checked onchange="toggleRatingMode(this.value)">
                        <span>Lichess Рейтинг</span>
                    </label>
                    <label class="switch-label">
                        <input type="radio" name="rating-mode" value="internal" onchange="toggleRatingMode(this.value)">
                        <span>Внутренний ELO</span>
                    </label>
                </div>

                <div class="leaderboard-card">
                    <div class="table-loading-overlay" id="rating-loading" style="display: none;">
                        <div class="spinner"></div>
                        <p id="rating-loading-text">Пересчет рейтинга...</p>
                    </div>

                    <table class="leaderboard-table" id="main-table">
                        <thead>
                            <!-- Headers will be injected by JS depending on mode -->
                        </thead>
                        <tbody id="table-body">
                            <!-- JS render -->
                        </tbody>
                    </table>
                </div>

                <div class="leaderboard-footer-actions">
                    <div class="add-player-section">
                        <input type="text" id="new-username" placeholder="Добавить (lichess login)">
                        <button class="add-btn" onclick="addPlayer()">ДОБАВИТЬ</button>
                    </div>
                    
                    <button id="recalc-btn" class="recalc-btn" onclick="recalculateInternalRatings()" style="display: none;">
                         Пересчитать ELO
                    </button>
                </div>
            </section>

            <!-- 2. HISTORY -->
            <section id="tab-history" class="tab-content">
                <div class="history-container" id="games-list">
                    <div class="placeholder-text">Загрузка истории...</div>
                </div>
            </section>

            <!-- 3. ACTIVITY (GitHub-style Calendar) -->
            <section id="tab-activity" class="tab-content">
                <div class="activity-container" id="activity-list">
                    <div class="placeholder-text">Загрузка активности...</div>
                </div>
            </section>

            <!-- 3. PROFILE -->
            <section id="tab-profile" class="tab-content">
                <div class="profile-header-controls">
                    <select id="profile-select" onchange="renderProfile(this.value)">
                        <!-- Options filled by JS -->
                    </select>
                </div>
                <div id="profile-card-container">
                    <!-- Profile Card Rendered Here -->
                </div>
            </section>

            <!-- 4. SHOP -->
            <section id="tab-shop" class="tab-content">
                <div class="shop-balance-display">
                    Ваш баланс: <span id="shop-balance-amount">0</span> ♟️
                </div>
                <div class="shop-tabs">
                    <button class="shop-tab-btn active" onclick="filterShop('badge')">Значки</button>
                    <button class="shop-tab-btn" onclick="filterShop('animation')">Анимации</button>
                    <button class="shop-tab-btn" onclick="filterShop('cardColor')">Цвета</button>
                    <button class="shop-tab-btn" onclick="filterShop('frames')">Рамки</button>
                    <button class="shop-tab-btn" onclick="filterShop('titles')">Титулы</button>
                </div>
                <div class="shop-grid" id="shop-container">
                    <!-- Shop Items Rendered Here -->
                </div>
            </section>

            <!-- 5. CHAT -->
            <section id="tab-chat" class="tab-content">
                <div class="chat-wrapper">
                    <div class="chat-window" id="chat-messages">
                        <!-- Messages render -->
                    </div>
                    <div class="chat-controls">
                        <input type="text" id="chat-input" placeholder="Напишите сообщение..." disabled>
                        <button id="chat-send-btn" onclick="sendMessage()" disabled>ОТПРАВИТЬ</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div id="inventory-modal" class="modal-overlay">
        <div class="modal-card wide-modal">
            <h2>Экипировка</h2>
            <div id="inventory-container" class="inventory-grid">
                <!-- Javascript will fill this -->
            </div>
            <button class="login-confirm-btn" onclick="document.getElementById('inventory-modal').classList.remove('active')">ЗАКРЫТЬ</button>
        </div>
    </div>

    <!-- LOGIN MODAL (Simple overlay) -->
    <div id="login-modal" class="modal-overlay">
        <div class="modal-card">
            <h2>Вход в чат</h2>
            <p>Выберите свой ник из списка или введите новый</p>
            
            <select id="login-select">
                <option value="" disabled selected>Кто вы?</option>
            </select>
            
            <div class="divider">или</div>
            
            <input type="text" id="login-input" placeholder="Я...">
            
            <button class="login-confirm-btn" onclick="loginChat()">ВОЙТИ</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
